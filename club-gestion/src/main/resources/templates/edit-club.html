<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Modifier le Club</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script>
        function removeMemberRow(button) {
            button.closest('.membre-row').remove();
        }

        function addMemberRow() {
            const container = document.getElementById("membresContainer");
            const newRow = document.createElement("div");
            newRow.classList.add("row", "g-2", "align-items-center", "membre-row", "mb-2");
            newRow.innerHTML = `
                <div class="col-md-5">
                    <input type="email" name="emails" class="form-control" placeholder="Email du membre" required>
                </div>
                <div class="col-md-5">
                    <input type="text" name="postes" class="form-control" placeholder="Poste (Pr√©sident, Tr√©sorier...)" required>
                </div>
                <div class="col-md-2 text-center">
                    <button type="button" class="btn btn-danger btn-sm" onclick="removeMemberRow(this)">üóë Supprimer</button>
                </div>
            `;
            container.appendChild(newRow);
        }
    </script>
</head>

<body class="bg-light">
<div class="container mt-5">
    <div class="card shadow-lg p-4">
        <h3 class="text-center mb-4">‚úèÔ∏è Modifier le club</h3>

        <form th:action="@{'/admin/clubs/' + ${club.id} + '/edit'}" th:object="${club}" method="post">
            <!-- Informations du club -->
            <div class="mb-3">
                <label class="form-label">Nom du club</label>
                <input type="text" th:field="*{nom}" class="form-control" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Description</label>
                <textarea th:field="*{description}" class="form-control" rows="3" required></textarea>
            </div>

            <div class="mb-3">
                <label class="form-label">Objectifs</label>
                <input type="text" th:field="*{objectifs}" class="form-control">
            </div>

            <div class="mb-3">
                <label class="form-label">Date de cr√©ation</label>
                <input type="text" th:field="*{dateCreation}" class="form-control">
            </div>

            <hr>

            <!-- Membres du bureau -->
            <h5 class="mt-4">üë• Membres du Bureau</h5>
            <div id="membresContainer">
                <!-- Boucle Thymeleaf pour les membres existants -->
                <div th:each="membre, iter : *{membreBureauList}" class="row g-2 align-items-center membre-row mb-2">
                    <div class="col-md-5">
                        <input type="email" name="emails" th:value="${membre.email}" class="form-control" required>
                    </div>
                    <div class="col-md-5">
                        <input type="text" name="postes" th:value="${membre.poste}" class="form-control" required>
                    </div>
                    <div class="col-md-2 text-center">
                        <button type="button" class="btn btn-danger btn-sm" onclick="removeMemberRow(this)">üóë Supprimer</button>
                    </div>
                </div>
            </div>

            <div class="text-center mt-3">
                <button type="button" class="btn btn-outline-primary btn-sm" onclick="addMemberRow()">‚ûï Ajouter un membre</button>
            </div>

            <hr>

            <!-- Boutons de validation -->
            <div class="text-center mt-4">
                <button type="submit" class="btn btn-success px-4">üíæ Enregistrer</button>
                <a href="/admin/dashboard" class="btn btn-secondary px-4 ms-2">Retour</a>
            </div>
        </form>
    </div>
</div>
</body>
</html>
